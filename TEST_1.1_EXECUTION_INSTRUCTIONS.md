# 🎯 测试 1.1 正常流程 - 执行说明

## 快速开始

### 当前状态
✅ **Mock API 服务器已启动**: `http://localhost:3000`
✅ **所有功能已实现并验证完成**
✅ **测试报告模板已创建**: `TEST_EXECUTION_REPORT_1.1.md`

---

## 测试准备 (2分钟)

### 1️⃣ 在Chrome中加载扩展

```bash
1. 打开 Chrome 浏览器
2. 访问 chrome://extensions/
3. 启用"开发者模式"（右上角开关）
4. 点击"加载已解压的扩展程序"
5. 选择项目根目录: /Users/robin/project/mrpi-capture-extension
```

### 2️⃣ 重新加载扩展（如已加载）

```bash
1. 访问 chrome://extensions/
2. 找到 "Mr.π Capture" 扩展
3. 点击刷新图标 🔄
```

---

## 测试执行 (5分钟)

### 测试场景 1：首次使用流程

**目标**: 验证首次使用时的引导体验

```
✅ 1. 点击扩展图标（工具栏）
✅ 2. 观察是否显示蓝色提示：
   "👋 首次使用？请先点击下方'⚙️ 配置 API Token'进行设置"
✅ 3. 点击 "⚙️ 配置 API Token" 链接
✅ 4. 输入测试token: test-token-12345678
✅ 5. 点击 "💾 保存设置"
✅ 6. 确认显示绿色成功提示
```

### 测试场景 2：完整捕获流程

**目标**: 验证完整的信息捕获和保存功能

```
✅ 1. 打开网页: https://www.example.com
✅ 2. 点击扩展图标
✅ 3. 验证URL和标题已自动填充
✅ 4. 编辑标题为: "Example Domain - 测试页面"
✅ 5. 输入备注: "这是一个测试，验证Mock API是否正常工作"
✅ 6. 选择标签: "Product (产品)"
✅ 7. 点击 "💾 保存到 Mr.π"
✅ 8. 确认显示绿色成功提示
✅ 9. 确认1.5秒后popup自动关闭
✅ 10. 检查Mock服务器终端输出
```

**期待的终端输出**:
```
✅ 接收到新的捕获数据:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 ID:      1
🔗 URL:     https://www.example.com/
📝 标题:    Example Domain - 测试页面
💬 备注:    这是一个测试，验证Mock API是否正常工作
🏷️  标签:    Product
📱 来源:    chrome_extension
⏰ 时间:    [时间戳]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 记录测试结果

### 方法 1：使用提供的测试报告模板

打开并填写 `TEST_EXECUTION_REPORT_1.1.md`，按照模板记录：
- 每个测试步骤的实际结果
- 通过/失败状态
- 截图
- 发现的问题

### 方法 2：快速记录

在终端或编辑器中记录：

```
测试日期: 2025-11-09
Chrome版本: [你的版本]

首次使用流程:
[ ] Pass / [ ] Fail - 蓝色提示显示
[ ] Pass / [ ] Fail - 跳转到options页面
[ ] Pass / [ ] Fail - Token保存成功

完整捕获流程:
[ ] Pass / [ ] Fail - URL/标题自动填充
[ ] Pass / [ ] Fail - 数据编辑正常
[ ] Pass / [ ] Fail - 保存成功
[ ] Pass / [ ] Fail - Popup自动关闭
[ ] Pass / [ ] Fail - Mock服务器接收数据

问题发现:
[如有问题，请描述]
```

---

## 测试完成检查清单

完成以下所有项，即可确认测试通过：

**首次使用流程** (6项):
- [ ] 扩展图标可点击，popup正常显示
- [ ] 蓝色提示信息正确显示（样式+文字）
- [ ] "⚙️ 配置 API Token" 链接可点击
- [ ] 跳转到options页面成功
- [ ] Token输入和保存功能正常
- [ ] 显示绿色成功提示

**完整捕获流程** (12项):
- [ ] 打开测试网页成功
- [ ] 扩展图标可点击
- [ ] URL自动填充正确
- [ ] 标题自动填充正确
- [ ] 已配置token时不显示蓝色提示
- [ ] 标题可编辑
- [ ] 备注可输入
- [ ] 标签可选择（4个选项）
- [ ] 保存按钮状态变化正确（"保存中..."）
- [ ] 显示绿色成功提示
- [ ] 1.5秒后popup自动关闭
- [ ] Mock服务器终端显示接收到的正确数据

---

## 故障排查

### Mock服务器未运行

**症状**: 保存时提示"无法连接到服务器"

**解决**:
```bash
# 检查服务器状态
curl http://localhost:3000/health

# 如果失败，重新启动（在新终端窗口）
node mock-api-server.js
```

### 扩展未加载最新代码

**症状**: 功能表现与预期不符

**解决**:
```bash
1. chrome://extensions/
2. 找到扩展，点击刷新 🔄
3. 重新测试
```

### 查看控制台错误

```bash
1. 点击扩展图标打开popup
2. 右键popup窗口
3. 选择"检查"
4. 查看Console标签的错误信息
```

---

## 参考文档

- 📘 **详细测试报告模板**: `TEST_EXECUTION_REPORT_1.1.md`
- 📗 **快速测试指南**: `QUICK_TEST_GUIDE.md`
- 📕 **完整测试指南**: `TEST_GUIDE.md`
- 📙 **项目说明**: `README.md`

---

## 完成后

### ✅ 测试通过
1. 填写 `TEST_EXECUTION_REPORT_1.1.md`
2. 在 `TODO.md` 中标记相应测试项为完成
3. 准备进行下一阶段测试

### ❌ 测试失败
1. 记录所有失败的测试用例
2. 记录详细的问题描述和重现步骤
3. 在 `TEST_EXECUTION_REPORT_1.1.md` 中记录问题
4. 准备修复问题

---

**祝测试顺利！** 🚀

如有任何问题，请查看 `QUICK_TEST_GUIDE.md` 获取更详细的指导。
