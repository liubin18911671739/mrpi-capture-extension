# 测试执行报告 - 1.1 正常流程测试

## 测试信息

**测试日期**: 2025-11-09
**测试版本**: v1.0
**测试类型**: 功能测试 - 正常流程
**测试工具**: Mock API 服务器 (`node mock-api-server.js`)
**测试执行人**: [待填写]

---

## 测试环境

### 系统环境
- **操作系统**: macOS (Darwin 25.0.0)
- **Chrome版本**: [请填写您的Chrome版本]
- **Node.js版本**: v22.20.0

### 服务状态
- ✅ Mock API 服务器：运行中 (`http://localhost:3000`)
- ✅ 健康检查端点：正常响应
- ✅ 扩展配置：已设置为本地API

---

## 测试前准备

### 1. 重新加载扩展
为确保测试最新代码，请按以下步骤操作：

```
1. 打开 Chrome 浏览器
2. 访问 chrome://extensions/
3. 找到 "Mr.π Capture" 扩展
4. 点击刷新图标 🔄
```

**状态**: [ ] 已完成

### 2. 清除已保存的 Token（可选）
如需测试首次使用流程，请先清除已保存的 token：

```
1. 打开扩展 popup
2. 点击"⚙️ 配置 API Token"
3. 清空 token 输入框
4. 点击保存
```

**状态**: [ ] 已完成 / [ ] 跳过（已有token）

---

## 测试执行

### 测试场景1：安装扩展后首次使用流程

#### 测试步骤

| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|------|------|---------|---------|------|
| 1.1 | 点击扩展图标 | popup正常显示 | [待填写] | [ ] Pass / [ ] Fail |
| 1.2 | 观察提示信息 | 显示蓝色提示："👋 首次使用？请先点击下方'⚙️ 配置 API Token'进行设置" | [待填写] | [ ] Pass / [ ] Fail |
| 1.3 | 点击"⚙️ 配置 API Token"链接 | 跳转到options页面 | [待填写] | [ ] Pass / [ ] Fail |
| 1.4 | 输入测试token: `test-token-12345678` | 输入框接受输入 | [待填写] | [ ] Pass / [ ] Fail |
| 1.5 | 点击"💾 保存设置" | 显示绿色成功提示："保存成功 ✔" | [待填写] | [ ] Pass / [ ] Fail |
| 1.6 | 等待1.5秒 | 提示消息自动消失 | [待填写] | [ ] Pass / [ ] Fail |

**测试点验证**:
- [ ] 蓝色提示样式正确（背景色、字体颜色、边框）
- [ ] 提示文字完整准确
- [ ] 链接可点击且正确跳转
- [ ] Token保存成功且持久化到 chrome.storage.sync
- [ ] 成功提示样式正确（绿色背景）

**截图**: [请添加关键步骤截图]

**发现的问题**:
- [无] / [请描述发现的问题]

---

### 测试场景2：完整的信息捕获流程

#### 前置条件
- [x] API Token已配置
- [x] Mock API服务器运行中

#### 测试步骤

| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|------|------|---------|---------|------|
| 2.1 | 打开测试网页: `https://www.example.com` | 网页正常加载 | [待填写] | [ ] Pass / [ ] Fail |
| 2.2 | 点击扩展图标 | popup正常显示 | [待填写] | [ ] Pass / [ ] Fail |
| 2.3 | 验证URL自动填充 | URL字段显示：`https://www.example.com/` | [待填写] | [ ] Pass / [ ] Fail |
| 2.4 | 验证标题自动填充 | 标题字段显示：`Example Domain` | [待填写] | [ ] Pass / [ ] Fail |
| 2.5 | 验证蓝色提示不显示 | 因已配置token，不显示蓝色提示 | [待填写] | [ ] Pass / [ ] Fail |
| 2.6 | 编辑标题为："Example Domain - 测试页面" | 标题可编辑且内容正确 | [待填写] | [ ] Pass / [ ] Fail |
| 2.7 | 输入备注："这是一个测试，验证Mock API是否正常工作" | 备注框接受输入 | [待填写] | [ ] Pass / [ ] Fail |
| 2.8 | 选择标签："Product (产品)" | 下拉框显示所有选项 | [待填写] | [ ] Pass / [ ] Fail |
| 2.9 | 点击"💾 保存到 Mr.π" | 按钮文字变为"保存中..." | [待填写] | [ ] Pass / [ ] Fail |
| 2.10 | 等待API响应 | 显示绿色成功提示："保存成功 ✔" | [待填写] | [ ] Pass / [ ] Fail |
| 2.11 | 等待1.5秒 | popup自动关闭 | [待填写] | [ ] Pass / [ ] Fail |
| 2.12 | ✨ 检查Mock服务器终端 | 终端显示接收到的数据详情 | [待填写] | [ ] Pass / [ ] Fail |

**终端输出验证**:

期待在Mock服务器终端看到以下格式的输出：

```
✅ 接收到新的捕获数据:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📌 ID:      1
🔗 URL:     https://www.example.com/
📝 标题:    Example Domain - 测试页面
💬 备注:    这是一个测试，验证Mock API是否正常工作
🏷️  标签:    Product
📱 来源:    chrome_extension
⏰ 时间:    [时间戳]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**实际终端输出**:
```
[请粘贴实际的终端输出]
```

**测试点验证**:
- [ ] URL正确自动填充
- [ ] 标题正确自动填充
- [ ] 标题可编辑
- [ ] 备注可输入
- [ ] 标签选择器包含所有4个选项
- [ ] 保存按钮状态变化正确
- [ ] 成功提示正确显示
- [ ] popup自动关闭时机正确（1.5秒）
- [ ] Mock服务器接收到正确数据
- [ ] 所有字段值传输正确

**截图**: [请添加关键步骤截图]

**发现的问题**:
- [无] / [请描述发现的问题]

---

## 额外验证测试（可选）

### 测试3.1：表单验证 - 空标题

| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|------|------|---------|---------|------|
| 3.1.1 | 清空标题字段 | 字段为空 | [待填写] | [ ] Pass / [ ] Fail |
| 3.1.2 | 点击"保存到 Mr.π" | 显示红色错误："请填写所有必填项" | [待填写] | [ ] Pass / [ ] Fail |
| 3.1.3 | 验证不发送请求 | Mock服务器无新数据 | [待填写] | [ ] Pass / [ ] Fail |

### 测试3.2：多次保存测试

| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|------|------|---------|---------|------|
| 3.2.1 | 保存第2个网页 | ID递增为2 | [待填写] | [ ] Pass / [ ] Fail |
| 3.2.2 | 保存第3个网页 | ID递增为3 | [待填写] | [ ] Pass / [ ] Fail |

### 测试3.3：API数据查询

访问 `http://localhost:3000/api/captured-items` 查看所有保存的数据

**返回结果**:
```json
[请粘贴返回的JSON数据]
```

**验证**: [ ] Pass / [ ] Fail

---

## 测试总结

### 测试结果统计

| 测试场景 | 总用例数 | 通过 | 失败 | 通过率 |
|---------|---------|------|------|--------|
| 首次使用流程 | 6 | [待填写] | [待填写] | [待填写]% |
| 完整捕获流程 | 12 | [待填写] | [待填写] | [待填写]% |
| 额外验证测试 | 4 | [待填写] | [待填写] | [待填写]% |
| **总计** | **22** | **[待填写]** | **[待填写]** | **[待填写]%** |

### 关键功能验证

- [ ] ✅ 首次使用时自动显示蓝色token提示
- [ ] ✅ 成功配置并保存API Token
- [ ] ✅ URL和标题自动填充功能正常
- [ ] ✅ 用户可以编辑标题
- [ ] ✅ 用户可以输入备注
- [ ] ✅ 用户可以选择标签（4个选项）
- [ ] ✅ 保存按钮状态变化正确
- [ ] ✅ 保存成功后显示绿色提示
- [ ] ✅ 1.5秒后popup自动关闭
- [ ] ✅ Mock服务器终端显示接收到的数据
- [ ] ✅ 表单验证功能正常
- [ ] ✅ 数据传输完整准确

### 发现的问题列表

| 问题ID | 严重程度 | 问题描述 | 重现步骤 | 状态 |
|--------|---------|---------|---------|------|
| [示例] | Low | [问题描述] | [步骤] | Open/Fixed |

### 测试结论

**总体评估**: [ ] 通过 / [ ] 不通过 / [ ] 有保留通过

**测试意见**:
```
[请填写测试意见，例如：]
- 所有核心功能正常工作
- UI/UX符合预期
- Mock API集成正常
- 建议进行真实API环境测试
```

### 下一步行动

- [ ] 修复发现的问题
- [ ] 进行回归测试
- [ ] 准备生产环境测试
- [ ] 更新用户文档
- [ ] 准备发布

---

## 附录

### 测试数据

**使用的测试Token**: `test-token-12345678`

**测试的网页列表**:
1. https://www.example.com - Example Domain
2. [如有其他测试网页，请列出]

### 参考文档

- 快速测试指南: `QUICK_TEST_GUIDE.md`
- 完整测试指南: `TEST_GUIDE.md`
- 项目README: `README.md`
- 实现日志: `IMPLEMENTATION_LOG.md`

### 测试截图

[请在此处添加关键步骤的截图]

1. 首次使用蓝色提示: [截图]
2. Options页面token保存: [截图]
3. Popup表单填充: [截图]
4. 保存成功提示: [截图]
5. Mock服务器终端输出: [截图]

---

**测试完成日期**: [待填写]
**测试签名**: [待填写]
